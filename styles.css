:root {
  --stone-50: #f6f4f0;
  --stone-100: #efede8;
  --stone-200: #e1ddd5;
  --card: #ffffff;
  --slate-900: #25323a;
  --slate-700: #475760;
  --slate-500: #66747c;
  --teal-600: #5f8d82;
  --teal-500: #76a398;
  --teal-200: #d9e7e2;
  --sage-100: #e7eee8;
  --danger-500: #bf6b5f;
  --border: #d7ddd8;
  --shadow-sm: 0 8px 20px rgba(28, 42, 48, 0.08);
  --shadow-md: 0 18px 36px rgba(28, 42, 48, 0.1);

  --font-body: "Inter", "Poppins", "Plus Jakarta Sans", "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  --font-display: var(--font-body);

  --exercise-menu-font-size: clamp(0.78rem, 0.62rem + 0.38vw, 0.96rem);
  --sidebar-width: 280px;

  --radius-sm: 10px;
  --radius: 14px;
  --radius-lg: 20px;
  --transition: 180ms ease;
}

*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  overflow: hidden;
  background: radial-gradient(circle at 18% 0%, #faf9f7 0%, var(--stone-50) 55%, var(--stone-100) 100%);
  color: var(--slate-900);
  font-family: var(--font-body);
  font-size: 15px;
  line-height: 1.55;
  -webkit-font-smoothing: antialiased;
}

.hidden { display: none !important; }

.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  min-height: 56px;
  padding: 8px clamp(14px, 2.2vw, 28px);
  background: rgba(246, 244, 240, 0.96);
  border-bottom: 1px solid var(--border);
}

.topbar-actions {
  display: flex;
  align-items: center;
  gap: 10px;
}

.topbar-btn {
  background: var(--teal-500);
  color: var(--card);
  border: none;
  padding: 8px 12px;
  border-radius: 999px;
  font-family: var(--font-body);
  font-size: clamp(0.72rem, 0.65rem + 0.2vw, 0.82rem);
  font-weight: 600;
  letter-spacing: 0.01em;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(95, 141, 130, 0.28);
  transition: background var(--transition), transform var(--transition), box-shadow var(--transition);
}

.topbar-btn:hover {
  background: var(--teal-600);
  transform: translateY(-1px);
  box-shadow: 0 8px 16px rgba(95, 141, 130, 0.36);
}

.brand {
  display: flex;
  align-items: center;
}

.brand-logo {
  width: 46px;
  height: 46px;
  border-radius: 12px;
  object-fit: cover;
  display: block;
}

.app-layout {
  display: flex;
  min-height: 0;
  height: calc(100svh - 56px);
  overflow: hidden;
}

.sidebar {
  width: var(--sidebar-width);
  min-width: 220px;
  max-width: 520px;
  flex: 0 0 var(--sidebar-width);
  display: flex;
  flex-direction: column;
  min-height: 0;
  background: var(--card);
  border-right: 1px solid var(--border);
}

.sidebar-resizer {
  width: 10px;
  cursor: col-resize;
  position: relative;
  flex-shrink: 0;
  background: transparent;
}

.sidebar-resizer::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 1px;
  background: var(--border);
}

.sidebar-resizer:hover::before {
  width: 2px;
  background: var(--teal-600);
}

body.is-resizing-sidebar,
body.is-resizing-sidebar * {
  cursor: col-resize !important;
  user-select: none !important;
}

.sidebar-header {
  padding: clamp(14px, 2vw, 24px) clamp(14px, 2vw, 20px) 14px;
  border-bottom: 1px solid var(--border);
}

.sidebar-title {
  font-family: var(--font-display);
  font-size: clamp(1rem, 0.84rem + 0.55vw, 1.35rem);
  font-weight: 650;
  color: var(--slate-900);
}

.sidebar-subtitle {
  margin-top: 2px;
  font-size: 0.68rem;
  color: var(--slate-500);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.sidebar-font-control {
  margin-top: 12px;
  max-height: 1.65rem;
  overflow: hidden;
  border: 1px solid transparent;
  border-radius: 10px;
  padding: 4px 6px;
  transition: max-height var(--transition), background var(--transition), border-color var(--transition);
}

.sidebar-font-control:hover,
.sidebar-font-control:focus-within {
  max-height: 5.8rem;
  background: #f6f8f7;
  border-color: #dde4df;
}

.sidebar-font-control:hover .sidebar-font-row,
.sidebar-font-control:focus-within .sidebar-font-row {
  opacity: 1;
  transform: translateY(0);
}

.sidebar-font-label,
.font-size-mark,
.menu-font-size-value {
  font-size: 0.68rem;
  color: var(--slate-500);
  letter-spacing: 0.06em;
  text-transform: uppercase;
}

.sidebar-font-label {
  display: block;
  line-height: 1.05rem;
}

.sidebar-font-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
  opacity: 0;
  transform: translateY(-4px);
  transition: opacity var(--transition), transform var(--transition);
}

.menu-font-slider {
  flex: 1;
  appearance: none;
  height: 4px;
  border-radius: 999px;
  background: var(--stone-200);
  cursor: pointer;
}

.menu-font-slider::-webkit-slider-thumb {
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: var(--teal-600);
}

.exercise-list {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  list-style: none;
  padding: 10px;
  scrollbar-width: thin;
  scrollbar-color: var(--stone-200) transparent;
}

.exercise-list::-webkit-scrollbar { width: 6px; }
.exercise-list::-webkit-scrollbar-track { background: transparent; }
.exercise-list::-webkit-scrollbar-thumb { background: var(--stone-200); border-radius: 999px; }

.exercise-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  margin-bottom: 4px;
  border-radius: 12px;
  cursor: pointer;
  user-select: none;
  transition: background var(--transition), border-color var(--transition), transform var(--transition);
  border: 1px solid transparent;
}

.exercise-item:hover {
  background: var(--stone-50);
  border-color: var(--stone-200);
}

.exercise-item.active {
  background: var(--teal-200);
  border-color: rgba(95, 141, 130, 0.32);
}

.exercise-item.completed { opacity: 0.58; }

.exercise-item.completed .item-name::after {
  content: " [done]";
  color: var(--teal-600);
}

.exercise-item.drag-over {
  background: #e7eeef;
  border-color: #aec4cb;
}

.drag-handle {
  color: var(--slate-500);
  font-size: 1rem;
  cursor: grab;
  padding: 2px;
  flex-shrink: 0;
  line-height: 1;
}

.drag-handle:active { cursor: grabbing; }

.item-info {
  flex: 1;
  min-width: 0;
}

.item-number {
  font-size: calc(var(--exercise-menu-font-size) - 0.15rem);
  color: var(--slate-500);
  letter-spacing: 0.08em;
}

.item-name {
  font-size: var(--exercise-menu-font-size);
  font-weight: 500;
  color: var(--slate-900);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.item-duration {
  font-size: calc(var(--exercise-menu-font-size) - 0.1rem);
  color: var(--slate-500);
  flex-shrink: 0;
}

.item-edit-btn,
.item-delete-btn {
  background: none;
  border: none;
  opacity: 0;
  cursor: pointer;
  font-size: 0.86rem;
  padding: 3px 6px;
  border-radius: 8px;
  transition: opacity var(--transition), color var(--transition), background var(--transition);
}

.exercise-item:hover .item-edit-btn,
.exercise-item:hover .item-delete-btn {
  opacity: 1;
}

.item-edit-btn {
  color: var(--slate-500);
}

.item-edit-btn:hover {
  color: var(--slate-900);
  background: var(--stone-100);
}

.item-delete-btn {
  color: var(--danger-500);
}

.item-delete-btn:hover {
  color: #fff;
  background: var(--danger-500);
}

.add-btn {
  margin: 10px 12px 14px;
  padding: 11px;
  border: 1.5px dashed #abc4bc;
  border-radius: 12px;
  background: transparent;
  color: var(--teal-600);
  font-family: var(--font-body);
  font-size: 0.84rem;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 7px;
  transition: background var(--transition), border-color var(--transition), color var(--transition);
}

.add-btn:hover {
  background: var(--sage-100);
  border-color: var(--teal-600);
}

.add-icon {
  font-size: 1rem;
  line-height: 1;
}

.main-panel {
  flex: 1;
  min-width: 0;
  min-height: 0;
  overflow: auto;
  padding: clamp(14px, 2.4vw, 34px);
  background: transparent;
  display: flex;
  align-items: stretch;
  justify-content: center;
}

.idle-state {
  margin: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 18px;
}

.idle-illustration {
  font-size: clamp(2.1rem, 1.6rem + 2vw, 3.4rem);
  color: var(--teal-500);
  animation: pulse 3s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 0.58; }
  50% { transform: scale(1.1); opacity: 1; }
}

.idle-text {
  color: var(--slate-700);
  font-size: clamp(0.9rem, 0.78rem + 0.42vw, 1.04rem);
  line-height: 1.65;
}

.begin-btn {
  padding: 12px 28px;
  border: none;
  border-radius: 999px;
  background: var(--teal-600);
  color: #fff;
  font-family: var(--font-body);
  font-size: clamp(0.82rem, 0.74rem + 0.22vw, 0.94rem);
  font-weight: 600;
  letter-spacing: 0.04em;
  cursor: pointer;
  box-shadow: 0 8px 18px rgba(95, 141, 130, 0.34);
  transition: transform var(--transition), background var(--transition), box-shadow var(--transition);
}

.begin-btn:hover {
  background: #547c73;
  transform: translateY(-1px);
  box-shadow: 0 12px 22px rgba(95, 141, 130, 0.4);
}

.calendar-state {
  width: 100%;
  height: 100%;
  min-height: 0;
  display: flex;
  align-items: stretch;
  justify-content: center;
}

.active-state {
  width: min(1220px, 100%);
  min-height: 0;
  height: 100%;
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(250px, 340px);
  gap: clamp(16px, 2vw, 30px);
  align-items: stretch;
}

.exercise-card {
  min-width: 0;
  min-height: clamp(22rem, 60vh, 46rem);
  max-height: none;
  background: var(--card);
  border-radius: clamp(14px, 1.8vw, 22px);
  border: 1px solid #e6ebe7;
  box-shadow: var(--shadow-md);
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  overflow: hidden;
}

.card-header {
  display: flex;
  align-items: flex-start;
  gap: clamp(10px, 1.3vw, 16px);
  padding: clamp(14px, 1.5vw + 0.6vh, 26px) clamp(14px, 1.8vw, 24px) clamp(10px, 1.2vw, 16px);
  background: linear-gradient(145deg, #eff4f2 0%, #faf9f7 100%);
  border-bottom: 1px solid var(--border);
}

.card-number {
  min-width: clamp(34px, 4vw, 56px);
  font-family: var(--font-display);
  font-weight: 700;
  font-size: clamp(1.3rem, 0.9rem + 1.8vw + 0.45vh, 2.7rem);
  line-height: 1;
  color: var(--teal-600);
}

.card-title-group {
  flex: 1;
  min-width: 0;
}

.card-title {
  font-family: var(--font-display);
  font-size: clamp(1rem, 0.72rem + 0.96vw + 0.32vh, 1.78rem);
  font-weight: 650;
  line-height: 1.2;
  color: var(--slate-900);
}

.card-progress {
  margin-top: 4px;
  font-size: clamp(0.68rem, 0.62rem + 0.14vw, 0.78rem);
  letter-spacing: 0.07em;
  color: var(--slate-500);
}

.card-edit-btn {
  border: 1px solid var(--border);
  border-radius: 10px;
  background: #fff;
  color: var(--slate-500);
  padding: 6px 10px;
  font-size: 0.92rem;
  cursor: pointer;
  transition: background var(--transition), border-color var(--transition), color var(--transition);
}

.card-edit-btn:hover {
  background: var(--stone-50);
  border-color: #c7d1cc;
  color: var(--slate-900);
}

.card-body {
  min-height: 0;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  gap: clamp(10px, 1.6vh, 20px);
  padding: clamp(12px, 1.4vw + 0.7vh, 24px);
  overflow: visible;
}

.card-description {
  color: var(--slate-700);
  font-family: var(--font-body);
  font-size: clamp(0.82rem, 0.5rem + 0.5vw + 0.56vh, 1.18rem);
  line-height: 1.58;
  letter-spacing: 0.008em;
  white-space: pre-line;
  text-wrap: pretty;
}

.card-image-wrap {
  margin-top: auto;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid #e2e8e3;
  background: #f8faf9;
  min-height: clamp(92px, 20vh, 220px);
  max-height: clamp(120px, 24vh, 280px);
}

.card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.timer-section {
  width: min(100%, 340px);
  min-height: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(12px, 1.8vh, 20px);
}

.checkoff-panel {
  width: 100%;
  border-radius: 18px;
  background: var(--card);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  text-align: center;
  padding: clamp(14px, 2vw, 22px) clamp(12px, 1.4vw, 18px);
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.checkoff-icon {
  font-size: clamp(1.4rem, 1rem + 1.2vw, 2rem);
  color: var(--teal-600);
}

.checkoff-title {
  font-family: var(--font-display);
  font-size: clamp(1.05rem, 0.84rem + 0.48vw, 1.35rem);
  font-weight: 650;
  color: var(--slate-900);
}

.checkoff-sub {
  font-size: clamp(0.72rem, 0.64rem + 0.2vw, 0.84rem);
  color: var(--slate-500);
}

.timer-wrap {
  width: clamp(164px, 22vw, 236px);
  aspect-ratio: 1;
  position: relative;
}

.timer-wrap:focus-visible {
  outline: 2px solid rgba(95, 141, 130, 0.7);
  outline-offset: 6px;
  border-radius: 50%;
}

.timer-svg {
  width: 100%;
  height: 100%;
}

.timer-track {
  fill: none;
  stroke: var(--stone-200);
  stroke-width: 8;
}

.timer-progress {
  fill: none;
  stroke: #6a8f85;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dashoffset 1s linear;
}

.timer-inner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

.timer-display {
  font-family: var(--font-display);
  font-size: clamp(1.6rem, 1.04rem + 1.55vw, 2.9rem);
  font-weight: 650;
  line-height: 1;
  letter-spacing: -0.02em;
  color: var(--slate-900);
}

.timer-status {
  margin-top: 4px;
  font-size: clamp(0.58rem, 0.54rem + 0.12vw, 0.68rem);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--slate-500);
}

.timer-section.checkoff-mode .duration-rows {
  display: none;
}

.timer-wrap.timer-checkoff {
  cursor: pointer;
  transition: transform var(--transition), filter var(--transition);
}

.timer-wrap.timer-checkoff:hover {
  transform: translateY(-1px) scale(1.01);
}

.timer-wrap.timer-checkoff .timer-progress {
  stroke: #b3c8c1;
  stroke-dashoffset: 0 !important;
  transition: stroke var(--transition);
}

.timer-wrap.timer-checkoff.is-complete .timer-progress {
  stroke: var(--teal-600);
}

.timer-wrap.timer-checkoff .timer-display {
  max-width: 9ch;
  font-size: clamp(1rem, 0.78rem + 0.6vw, 1.36rem);
  line-height: 1.2;
  letter-spacing: 0;
  white-space: normal;
}

.timer-wrap.timer-checkoff .timer-status {
  margin-top: 8px;
  font-size: clamp(0.56rem, 0.5rem + 0.18vw, 0.68rem);
  letter-spacing: 0.08em;
}

.rep-status {
  margin-top: 5px;
  font-size: clamp(0.68rem, 0.62rem + 0.16vw, 0.8rem);
  color: var(--slate-700);
}

.timer-controls {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.duration-rows {
  border-radius: 12px;
  background: var(--card);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
}

.duration-control {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
}

.duration-control + .duration-control {
  border-top: 1px solid #e8ece8;
}

.duration-label {
  font-size: 0.64rem;
  color: var(--slate-500);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.duration-input-wrap {
  display: flex;
  align-items: center;
  gap: 5px;
}

.duration-input {
  width: 60px;
  border: 1px solid #d4ddd7;
  border-radius: 8px;
  padding: 5px 8px;
  background: var(--stone-50);
  color: var(--slate-900);
  text-align: center;
  font-family: var(--font-body);
  font-size: 0.86rem;
  outline: none;
  transition: border-color var(--transition), background var(--transition);
}

.duration-input:focus {
  border-color: var(--teal-600);
  background: #fff;
}

.duration-input:disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

.duration-unit {
  font-size: 0.72rem;
  color: var(--slate-500);
}

.control-buttons {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.ctrl-btn {
  width: 100%;
  border: none;
  border-radius: 10px;
  padding: 10px 12px;
  font-family: var(--font-body);
  font-size: 0.84rem;
  font-weight: 600;
  letter-spacing: 0.04em;
  cursor: pointer;
  transition: transform var(--transition), box-shadow var(--transition), background var(--transition), color var(--transition);
}

.start-btn {
  background: var(--teal-600);
  color: #fff;
  box-shadow: 0 6px 14px rgba(95, 141, 130, 0.32);
}

.start-btn:hover {
  background: #567f75;
  transform: translateY(-1px);
}

.stop-btn {
  background: #f2ded9;
  color: #91564c;
}

.stop-btn:hover {
  background: #bf6b5f;
  color: #fff;
}

.next-btn {
  background: #dbe7e2;
  color: #4f746a;
  animation: gentlePulse 1.9s ease-in-out infinite;
}

.next-btn:hover {
  animation: none;
  background: #c9ddd6;
}

@keyframes gentlePulse {
  0%, 100% { box-shadow: 0 2px 8px rgba(95, 141, 130, 0.16); }
  50% { box-shadow: 0 8px 16px rgba(95, 141, 130, 0.26); }
}

.modal-overlay {
  position: fixed;
  inset: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 18px;
  background: rgba(37, 50, 58, 0.34);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal {
  width: min(100%, 520px);
  background: var(--card);
  border-radius: 20px;
  border: 1px solid #e4e9e4;
  box-shadow: 0 24px 50px rgba(25, 37, 43, 0.2);
  overflow: hidden;
}

.modal--exercise {
  max-width: 860px;
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 18px 20px 14px;
  border-bottom: 1px solid #ebefeb;
}

.modal-title {
  font-family: var(--font-display);
  font-size: clamp(1.04rem, 0.92rem + 0.34vw, 1.35rem);
  font-weight: 650;
  color: var(--slate-900);
}

.modal-close {
  border: none;
  background: none;
  color: var(--slate-500);
  border-radius: 8px;
  font-size: 1rem;
  padding: 4px 7px;
  cursor: pointer;
  transition: color var(--transition), background var(--transition);
}

.modal-close:hover {
  color: var(--slate-900);
  background: var(--stone-50);
}

.modal-body {
  padding: 14px 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.exercise-form-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px 12px;
}

.field-group { min-width: 0; }
.field-group-span-2 { grid-column: span 2; }

.field-group-checkbox {
  display: flex;
  align-items: flex-end;
  padding-bottom: 6px;
}

.field-label {
  display: block;
  margin-bottom: 4px;
  font-size: 0.72rem;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  color: var(--slate-500);
}

.field-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.82rem;
  color: var(--slate-700);
}

.field-checkbox input {
  width: 16px;
  height: 16px;
}

.field-input,
.field-textarea {
  width: 100%;
  border: 1px solid #d7ddd8;
  border-radius: 10px;
  padding: 9px 12px;
  font-family: var(--font-body);
  font-size: 0.9rem;
  color: var(--slate-900);
  background: #f8faf9;
  resize: none;
  outline: none;
  transition: border-color var(--transition), background var(--transition);
}

.field-input:focus,
.field-textarea:focus {
  border-color: var(--teal-600);
  background: #fff;
}

.image-upload-area {
  border: 1.5px dashed #b2c6bf;
  border-radius: 12px;
  padding: 12px;
  background: #f4f8f6;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 9px;
  cursor: pointer;
  transition: border-color var(--transition), background var(--transition);
}

.image-upload-area:hover {
  border-color: var(--teal-600);
  background: #edf4f1;
}

.upload-hint {
  font-size: 0.8rem;
  color: var(--slate-700);
}

.upload-btn {
  border: 1px solid var(--teal-600);
  border-radius: 999px;
  background: transparent;
  color: var(--teal-600);
  padding: 7px 15px;
  font-family: var(--font-body);
  font-size: 0.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: background var(--transition), color var(--transition);
}

.upload-btn:hover {
  background: var(--teal-600);
  color: #fff;
}

.upload-preview {
  width: 100%;
  max-height: 150px;
  object-fit: contain;
  border-radius: 10px;
  border: 1px solid #dfe6e1;
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 12px 20px 16px;
  border-top: 1px solid #ebefeb;
}

.modal-btn {
  border: 1px solid transparent;
  border-radius: 999px;
  padding: 9px 18px;
  font-family: var(--font-body);
  font-size: 0.82rem;
  font-weight: 600;
  cursor: pointer;
  transition: background var(--transition), color var(--transition), border-color var(--transition);
}

.modal-btn.primary {
  background: var(--teal-600);
  color: #fff;
}

.modal-btn.primary:hover {
  background: #547c73;
}

.modal-btn.secondary {
  background: transparent;
  border-color: #d8dfda;
  color: var(--slate-700);
}

.modal-btn.secondary:hover {
  background: var(--stone-50);
}

.modal-btn.danger {
  background: #f3e1dd;
  color: #96554c;
  border-color: #e6c7c1;
}

.modal-btn.danger:hover {
  background: var(--danger-500);
  color: #fff;
}

.modal--complete {
  max-width: 380px;
  padding: 44px 32px;
  text-align: center;
}

.complete-icon {
  font-size: 2.5rem;
  color: var(--teal-600);
  animation: pulse 2s ease-in-out infinite;
}

.complete-title {
  margin-top: 10px;
  font-family: var(--font-display);
  font-size: clamp(1.5rem, 1.2rem + 1vw, 2rem);
  font-weight: 650;
  color: var(--slate-900);
}

.complete-sub {
  margin-top: 8px;
  margin-bottom: 18px;
  color: var(--slate-700);
  font-size: 0.95rem;
}

::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #d8ddd9; border-radius: 999px; }

.timer-running .timer-progress { stroke: var(--teal-600); }
.timer-running .timer-display { color: var(--teal-600); }

.timer-paused .timer-progress { stroke: #b7887f; }

.timer-leadin .timer-progress { stroke: #6f8893; }

.timer-leadin .timer-display,
.timer-leadin .timer-status {
  color: #627a85;
}

.timer-done .timer-progress { stroke: #9bb4ac; }
.timer-done .timer-display { color: var(--slate-500); }
.timer-done .timer-status { color: #7f968f; }

.leadin-badge {
  position: absolute;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  padding: 3px 10px;
  border-radius: 999px;
  background: #dfe8ec;
  color: #5e7681;
  text-transform: uppercase;
  letter-spacing: 0.09em;
  font-size: 0.57rem;
  font-weight: 700;
  transition: opacity var(--transition);
}

.timer-leadin .leadin-badge {
  opacity: 1;
}

@media (max-width: 1160px) {
  .active-state {
    grid-template-columns: minmax(0, 1fr) minmax(230px, 300px);
  }
}

@media (max-width: 950px) {
  .app-layout {
    flex-direction: column;
    height: auto;
    min-height: calc(100svh - 56px);
  }

  .sidebar {
    width: 100%;
    max-width: none;
    min-width: 0;
    flex: 0 0 auto;
    border-right: none;
    border-bottom: 1px solid var(--border);
    max-height: min(42svh, 360px);
  }

  .sidebar-resizer {
    display: none;
  }

  .main-panel {
    min-height: 0;
    flex: 1;
    padding: 12px;
  }

  .active-state {
    grid-template-columns: 1fr;
    height: auto;
    min-height: 0;
  }

  .timer-section {
    width: 100%;
    max-width: none;
  }

  .exercise-card {
    min-height: clamp(22rem, 62svh, 44rem);
  }
}

@media (max-width: 760px) {
  .topbar {
    min-height: 54px;
    padding-left: 12px;
    padding-right: 12px;
  }

  .topbar-actions {
    gap: 8px;
  }

  .topbar-btn {
    padding: 7px 10px;
  }

  .brand-logo {
    width: 40px;
    height: 40px;
  }

  .exercise-form-grid {
    grid-template-columns: 1fr;
  }

  .field-group-span-2 {
    grid-column: auto;
  }

  .modal {
    border-radius: 16px;
  }

  .modal-header,
  .modal-body,
  .modal-footer {
    padding-left: 14px;
    padding-right: 14px;
  }

  .card-body {
    padding: 12px;
  }
}

@media (hover: none) {
  .sidebar-font-control {
    max-height: 5.8rem;
    background: #f6f8f7;
    border-color: #dde4df;
  }

  .sidebar-font-row {
    opacity: 1;
    transform: translateY(0);
  }
}
